.PHONY: all env figures paper test

env:
	conda env create -f environment.yml || conda env update -f environment.yml
	@echo "conda activate ifrs16-lbo" 

all: figures paper

figures:
	python -m analysis.run_all --config analysis/configs/default.yaml --seed 42

paper:
	latexmk -pdf -cd -interaction=nonstopmode paper/main.tex

test:
	pytest -q

# Legacy aliases for backward compatibility
install: env
academic: all
clean:
	rm -rf __pycache__ .pytest_cache
	rm -rf *.pdf *.log *.aux *.bbl *.blg *.fdb_latexmk *.fls *.synctex.gz
	rm -rf output/ analysis/figures/ .coverage
